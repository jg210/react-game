(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){e.exports=n(59)},40:function(e,t,n){},48:function(e,t,n){},57:function(e,t){},59:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),r=n(30),s=n.n(r),o=(n(40),n(7)),c=n(8),l=n(17),h=n(16),u=n(18),d=n(9),p=n(13),f=n(23),m=n(12),b="START_GAME",v="LEVEL_COMPLETE",g="GAME_COMPLETE",y="START_LEVEL",w={current:1,last:5},E={current:0},x={current:"start"},O=Object(p.c)({level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LEVEL_CHANGE":var n=t.payload.level;if(null===n&&(n=e.current+1),n<1||n>e.last)throw new Error("level out of range: ".concat(n));return Object(m.a)({},e,{current:n});default:return e}},score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=e.current;switch(t.type){case"SCORE_UPDATE":return n+=t.payload.points,Object(m.a)({},e,{current:n});default:return e}},screen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SCREEN_CHANGE":var n=t.payload.screen;return Object(m.a)({},e,{current:n});default:return e}}}),k=n(4),j=n.n(k),_=n(5),C=n(19),S=n.n(C),T=["INFO","DEBUG"].map(function(e){return e.length}),A=S.a.max(T),W=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"info",value:function(e){this.log("INFO",e)}},{key:"debug",value:function(e){this.log("DEBUG",e)}},{key:"log",value:function(e,t){var n=new Date,i="function"===typeof t?t():t;console.log("".concat(n.toISOString()," ").concat(e.padStart(A)," ").concat(i))}}]),e}(),B=j.a.mark(H),N=j.a.mark(L);function H(e){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:W.info("Action: ".concat(e.type));case 1:case"end":return t.stop()}},B,this)}function L(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.d)("*",H);case 2:case"end":return e.stop()}},N,this)}var R=function(){return{type:g}},U=function(){return{type:"LEVEL_CHANGE",payload:{level:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}}},I=function(){return{type:y}},P=function(e){return{type:"SCREEN_CHANGE",payload:{screen:e}}},G=j.a.mark(M),D=j.a.mark(X);function M(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.b)(P("gameComplete"));case 2:case"end":return e.stop()}},G,this)}function X(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.d)(g,M);case 2:case"end":return e.stop()}},D,this)}var K=n(33),V=Object(K.a)([function(e){return e.level.current},function(e){return e.level.last}],function(e,t){return e===t}),z=j.a.mark(J),F=j.a.mark(Y);function J(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.c)(V);case 2:if(!e.sent){e.next=7;break}return e.next=5,Object(_.b)(R());case 5:e.next=11;break;case 7:return e.next=9,Object(_.b)(U());case 9:return e.next=11,Object(_.b)(I());case 11:case"end":return e.stop()}},z,this)}function Y(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.d)(v,J);case 2:case"end":return e.stop()}},F,this)}var $=j.a.mark(Q),q=j.a.mark(Z);function Q(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.b)(P("startLevel"));case 2:return e.next=4,Object(_.a)(f.b,2500);case 4:return e.next=6,Object(_.b)(P("game"));case 6:case"end":return e.stop()}},$,this)}function Z(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.d)(y,Q);case 2:case"end":return e.stop()}},q,this)}var ee=j.a.mark(ne),te=j.a.mark(ie);function ne(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.b)(I());case 2:case"end":return e.stop()}},ee,this)}function ie(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.d)(b,ne);case 2:case"end":return e.stop()}},te,this)}var ae=[L,X,Y,Z,ie],re=function(){var e=Object(f.a)(),t=Object(p.d)(O,Object(p.a)(e));return ae.forEach(function(t){e.run(t)}),t},se=(n(48),n(28)),oe=n(3),ce=n(34),le=n.n(ce),he=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"clamp",value:function(e,t,n){if(n<t)throw new Error("max of ".concat(n," is less than min ").concat(t," (with value of ").concat(e,")"));return e<t&&(e=t),e>n&&(e=n),e}},{key:"nonNull",value:function(e){if(null===e)throw new Error("null value.");if(void 0===e)throw new Error("undefined value.");return e}}]),e}(),ue=function(){function e(t){Object(o.a)(this,e),this.constraints=[],this.acceleration=0,this.enabled=!0,this.speed=0;var n=t.x,i=t.y;this.minX=t.minX,this.maxX=t.maxX,this.width=t.width,this.height=t.height,this.world=t.world,this.maxAcceleration=void 0===t.maxAcceleration?.005:t.maxAcceleration,this.maxSpeed=void 0===t.maxSpeed?1.3:t.maxSpeed;var a=.2*this.height,r=[{x:-this.width/2,y:-this.height/2},{x:0,y:-this.height/2-a},{x:this.width/2,y:-this.height/2},{x:this.width/2,y:this.height/2},{x:-this.width/2,y:this.height/2}];this.body=oe.Bodies.fromVertices(n,i,r,{label:"magnet",isStatic:!0})}return Object(c.a)(e,[{key:"attachmentPosition",value:function(){return{x:this.body.position.x,y:this.body.position.y+this.height/2}}},{key:"addToWorld",value:function(){oe.World.add(this.world,this.body)}},{key:"attachToMagnet",value:function(e){var t=oe.Constraint.create({bodyA:this.body,bodyB:e,render:{visible:!1}});this.constraints.push(t),this.enabled&&oe.World.add(this.world,t)}},{key:"left",value:function(){this.speed>0&&(this.speed=0),this.acceleration=-this.maxAcceleration}},{key:"right",value:function(){this.speed<0&&(this.speed=0),this.acceleration=this.maxAcceleration}},{key:"stop",value:function(){this.acceleration=0,this.speed=0}},{key:"update",value:function(e){this.speed=he.clamp(this.speed+this.acceleration*e,-this.maxSpeed,this.maxSpeed);var t=this.speed*e,n=he.clamp(this.body.position.x+t,this.minX,this.maxX),i=this.body.position.y;oe.Body.setPosition(this.body,{x:n,y:i})}},{key:"toggle",value:function(){this.setEnabled(!this.enabled)}},{key:"setEnabled",value:function(e){e?this.enabled||oe.World.add(this.world,this.constraints):this.enabled&&oe.World.remove(this.world,this.constraints),this.enabled=e}},{key:"getSpeed",value:function(){return this.speed}}]),e}(),de=function(){function e(t,n,i,a){var r=this;Object(o.a)(this,e),this.ballImageSize=64,this.boxHeight=600,this.boxWidth=800,this.magnetHeight=15,this.magnetWidth=50,this.wallThickness=50,this.lastUpdateTimestamp=null,this.started=!1,this.stopped=!1,this._handleCollision=function(e){var t=r;e.pairs.forEach(function(e){[e.bodyA,e.bodyB].forEach(function(e){if(oe.Sleeping.set(e,!1),t.remainingObjectIds.delete(e.id)){t.scoreUpdate(1)}})})},this._handleKeyPress=function(e){if(!e.repeat)if("keydown"===e.type&&" "===e.key&&r.magnet.toggle(),"keydown"===e.type)"ArrowLeft"===e.key?r.magnet.left():"ArrowRight"===e.key&&r.magnet.right();else{if("keyup"!==e.type)throw new Error(e);r.magnet.stop()}},this._handleBeforeUpdate=function(e){if(void 0===r.lastUpdateTimestamp)throw new Error;if(null!==r.lastUpdateTimestamp){var t=e.timestamp-r.lastUpdateTimestamp;r.magnet.update(t)}r._isEverythingSleeping()&&(0===r.remainingObjectIds.size?r.levelComplete():r.magnet.setEnabled(!0)),r.lastUpdateTimestamp=e.timestamp},this.levelComplete=i,this.scoreUpdate=a,this.level=n,this.container=t,this.engine=oe.Engine.create(),this.engine.world.gravity.y=.2,this.engine.enableSleeping=!0,this.ballRadius=1.025*this.ballImageSize/2,this.ballHeight=this.ballRadius,this.ballWidth=this.ballRadius,this.magnet=this._createMagnet(),this.ball=this._createBall(this.magnet);var s=this._createWalls(),c=this._createObjects(),l=S.a.map(c,function(e){return e.id});this.remainingObjectIds=new Set(l),this.magnet.attachToMagnet(this.ball),oe.World.add(this.engine.world,[].concat(Object(se.a)(s),[this.ball],Object(se.a)(c))),this.magnet.addToWorld(),W.info("Body ids:"),oe.Composite.allBodies(this.engine.world).forEach(function(e){W.info("".concat(e.id," - ").concat(e.label))}),this.renderer=oe.Render.create({element:this.container,engine:this.engine,options:{background:"transparent",wireframes:!1,width:this.boxWidth,height:this.boxHeight}})}return Object(c.a)(e,[{key:"start",value:function(){if(this.started)throw new Error("already started.");if(this.stopped)throw new Error("cannot restart.");oe.Events.on(this.engine,"collisionStart",this._handleCollision),oe.Events.on(this.engine,"beforeUpdate",this._handleBeforeUpdate),oe.Engine.run(this.engine),oe.Render.run(this.renderer),document.addEventListener("keydown",this._handleKeyPress),document.addEventListener("keyup",this._handleKeyPress),this.container.focus(),this.started=!0}},{key:"stop",value:function(){if(!this.started)throw new Error("not started.");if(this.stopped)throw new Error("already stopped");document.removeEventListener("keydown",this._handleKeyPress),document.removeEventListener("keyup",this._handleKeyPress),oe.Render.stop(this.renderer),oe.Events.off(this.engine,"collisionStart"),oe.Events.off(this.engine,"beforeUpdate"),this.renderer.canvas.remove(),this.started=!1,this.stopped=!0}},{key:"_isEverythingSleeping",value:function(){return S.a.every(this.engine.world.bodies,function(e){return e.isSleeping})}},{key:"_createWalls",value:function(){var e={isStatic:!0};return[oe.Bodies.rectangle(this.boxWidth/2,0,this.boxWidth,this.wallThickness,Object(m.a)({},e,{label:"wall - T"})),oe.Bodies.rectangle(this.boxWidth/2,this.boxHeight,this.boxWidth,this.wallThickness,Object(m.a)({},e,{label:"wall - B"})),oe.Bodies.rectangle(this.boxWidth,this.boxHeight/2,this.wallThickness,this.boxHeight,Object(m.a)({},e,{label:"wall - R"})),oe.Bodies.rectangle(0,this.boxHeight/2,this.wallThickness,this.boxHeight,Object(m.a)({},e,{label:"wall - L"}))]}},{key:"_initialX",value:function(){return.68*(this.boxWidth-this.wallThickness/2)+this.wallThickness/2}},{key:"_createMagnet",value:function(){var e=this.wallThickness/2+Math.max(this.magnetWidth/2,this.ballWidth/2)+.01*this.boxWidth;return new ue({x:this._initialX(),y:this.wallThickness/2+.01*this.boxHeight+this.magnetHeight/2,minX:e,maxX:this.boxWidth-e,width:this.magnetWidth,height:this.magnetHeight,world:this.engine.world})}},{key:"_createBall",value:function(e){var t=e.attachmentPosition().x,n=e.attachmentPosition().y+this.ballRadius;return oe.Bodies.circle(t,n,this.ballRadius,{label:"ball",render:{sprite:{texture:"ball.png"}},restitution:.5,frictionAir:0,frictionStatic:0})}},{key:"_createObjects",value:function(){var e=this,t=le()(this.level+484726723),n=[];return S.a.range(0,this.level).forEach(function(i){var a=10+15*t(),r=e.wallThickness/2+a,s=r+t()*(e.boxWidth-2*r),o=r+e.magnetHeight+e.ballHeight+t()*(e.boxHeight-2*r-e.magnetHeight-e.ballHeight),c=oe.Bodies.circle(s,o,a,{label:"object ".concat(i),isStatic:!1,isSleeping:!0});n.push(c)}),n}},{key:"getBodyCount",value:function(){return oe.Composite.allBodies(this.engine.world).length}},{key:"getConstraintCount",value:function(){return oe.Composite.allConstraints(this.engine.world).length}}]),e}(),pe=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).CONTAINER_ID="matter_js_container",n.gameEngine=null,n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Game",id:this.CONTAINER_ID,tabIndex:"0"})}},{key:"_startEngine",value:function(){var e=he.nonNull(document.getElementById(this.CONTAINER_ID));this.gameEngine=new de(e,this.props.level,this.props.levelComplete,this.props.scoreUpdate),this.gameEngine.start()}},{key:"_stopEngine",value:function(){this.gameEngine&&(this.gameEngine.stop(),this.gameEngine=null)}},{key:"componentDidMount",value:function(){this._startEngine()}},{key:"componentWillUnmount",value:function(){this._stopEngine()}},{key:"componentDidUpdate",value:function(e,t){this.props.level!==e.level&&(this._stopEngine(),this._startEngine())}}]),t}(i.Component),fe={levelComplete:function(){return{type:v}},scoreUpdate:function(e){return{type:"SCORE_UPDATE",payload:{points:e}}}},me=Object(d.b)(function(e){return{level:e.level.current}},fe)(pe),be=function(e){function t(){var e,n;Object(o.a)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e){var t=e.currentTarget;if(t){var i=parseInt(t.value);n.props.levelChange(i)}},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("select",{value:this.props.level,onChange:this.handleClick},S.a.range(1,this.props.numberOfLevels+1).map(function(e){return a.a.createElement("option",{key:e,value:e},e)}))}}]),t}(i.Component),ve={levelChange:U},ge=Object(d.b)(function(e){return{level:e.level.current,numberOfLevels:e.level.last}},ve)(be),ye=Object(d.b)(function(e){return{score:e.score.current}})(function(e){return a.a.createElement("div",{className:"Scores"},a.a.createElement("div",null,e.score))}),we=Object(d.b)(function(e){return{level:e.level.current}},{})(function(e){return a.a.createElement("div",null,"Level ",e.level)}),Ee=function(e){function t(){var e,n;Object(o.a)(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).ref=a.a.createRef(),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{ref:this.ref,tabIndex:"0",onClick:this.props.startGame,onKeyPress:this.props.startGame,className:"StartScreen"},a.a.createElement("p",null,"Press any key to start game."),a.a.createElement("p",null,"Use left and right arrows to position the magnet."),a.a.createElement("p",null,"Press space to turn the magnet on or off."),a.a.createElement("p",null,"You move to the next level when all objects have been dislodged."))}},{key:"componentDidMount",value:function(){this.ref.current.focus()}}]),t}(i.Component),xe={startGame:function(){return{type:b}}},Oe={game:function(e){return a.a.createElement("div",null,a.a.createElement(ye,null),a.a.createElement(me,null),a.a.createElement(ge,null))},gameComplete:function(e){return a.a.createElement("div",null,"Game Complete")},startLevel:we,start:Object(d.b)(null,xe)(Ee)},ke=Object(d.b)(function(e){return{screen:e.screen.current}},{})(function(e){var t=Oe[e.screen];return a.a.createElement(t,{},null)}),je=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).store=re(),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement(d.a,{store:this.store},a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(ke,null))))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.decomp=n(58);var _e=he.nonNull(document.getElementById("root"));s.a.render(a.a.createElement(je,null),_e),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,2,1]]]);
//# sourceMappingURL=main.bd8c5de8.chunk.js.map